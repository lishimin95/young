# 集群中配置多台计算机之间ssh无密码登录

例如三台服务器集群

192.168.12.129  #服务器1

192.168.12.130  #服务器2

192.168.12.166  #服务器3

##一 在【服务器1】中生成秘钥

以 app用户为例

```shell
#进入到.ssh目录
cd ~/.ssh/
#执行ssh-keygen 命令
ssh-keygen -t rsa
```

或

```shell
#在没有.ssh目录的情况下也可直接执行如下命令
ssh-keygen -t rsa
```

## 二 查看生成的秘钥文件

```shell
id-rsa #私钥
id-ras.pub #公钥
```

## 三 生成【authorized_keys】文件

```shell
#在【服务器1】app用户的目录【.ssh】下执行命令
cat id-rsa.pub >> authorized_keys
#会在目录.ssh下面会出现authorized_keys文件
```

## 四 拷贝【authorized_keys】文件至【服务器2】的【./ssh】目录下

```powershell
scp authorized_keys app@【服务器2】的IP:~/.ssh/
```

## 五 在【服务器2】上生成秘钥并将公钥追加至【authorized_keys】文件中

```powershell
cd ~/.ssh
ssh-keygen -t rsa
cat id-rsa.pub >> authorized_keys
```

## 六 拷贝【服务器2】生产的【authorized_keys】文件至【服务器3】的【./ssh】目录下

```powershell
scp authorized_keys root@【服务器3】的IP:~/.ssh/
```

## 七 在【服务器3】上生成秘钥并将公钥追加至【authorized_keys】文件中

```powershell
cd ~/.ssh
ssh-keygen -t rsa
cat id-rsa.pub >> authorized_keys
```

## 八 依次类推，直至集群中的最后一台计算机

## 九 将最后生成的authorized_keys复制到集群中的每一台计算机的【.ssh】目录下，覆盖掉之前的【authorized_keys】

## 十 免密登录

```powershell
ssh app@集群中的任意一台服务器的IP
```

